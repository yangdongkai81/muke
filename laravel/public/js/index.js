define("class/index",["/static/module/pay/common/js/cookie.js"],function(){function a(){require(["common/js/player"],function(a){$("#js-video-content").show(),a.init({id:"video-container",url:$("#js-video-content").data("vurl"),videotitile:document.title,width:"900",height:"500",image:$("#js-video-content").data("purl"),events:{onReady:function(){this.play()},onComplete:function(){$(".js-close-video").click()}}})})}var s=navigator.userAgent.toLowerCase(),t=!!s.match(/ipad/i);if(t){if(-1==location.href.toLocaleLowerCase().indexOf("app=1"))$("#header").show(),$(".path").show(),$(".extra").show(),$(".price-box").show(),$(".course-class-infos").find(".btnwarp").css("display","inline-block").show(),$(".recommendcourse").show(),$("#J_GotoTop").show(),$(".info-recommendcourse").css({"padding-left":"20px","box-sizing":"border-box"}).show(),$("#footer").show(),$(".js-comp-tab").find(".comp-tab-item").eq(3).show(),$(".class-tab-pannel").width(730),$(".class-tab-pannel .outline-list").find(".chapter-ul").width(730),$(".course-class-infos").find(".w").css("height","544px"),$(".course-class-infos").find(".path").css("margin-left","50px"),$(".course-class-infos").find(".extra").css("margin-right","50px");else{var i=$(".js-comp-tab").find(".comp-tab-item");i.each(function(){var a=$(this).find("a").attr("href");$(this).find("a").attr("href",a+"?app=1")})}$(".js-close-video").hide(),$("#js-video-content").show(),require(["/static/lib/jwplayer/1.0.0/webjwplayer.js"],function(){jwplayer("video-container").setup({startparam:"start",autostart:!1,width:"900",height:"500",file:$("#js-video-content").data("vurl"),image:$("#js-video-content").data("purl")})})}var e=function(a){var s,t={blueArr:["CSS3","jquery","sassless","python","mysql","大数据","cloudcomputing","photoshop"],orangeArr:["html","html5","webapp","fetool"],greenArr:["nodejs","vuejs","C","C#","android","mongodb","test"],cyanArr:["bootstrap","Reactjs","C puls puls","Go","ios","Unity 3D","Cocos2d-x","maya"],purpleArr:["javascript","php","linux","premiere","ZBrush"],redArr:["angularjs","java","ruby","Oracle","SQL Server"]};return $.each(t,function(i){$.each(t[i],function(e){a==t[i][e]&&(s=i)})}),"blueArr"==s?"blue":"orangeArr"==s?"orange":"greenArr"==s?"green":"cyanArr"==s?"cyan":"purpleArr"==s?"purple":"redArr"==s?"red":"red"},n=function(a){for(var s='<h3 class="box-tit box-class-tit">课前必学</h3>			    	<div class="free-course-list clearfix">',t=0;t<a.length;t++){var i=a[t];if(s+='<div class="index-card-container course-card-container container ">					<a target="_blank" class="course-card" href="http://www.imooc.com/learn/'+i.id+'" target="_blank">',"undefinded"!=typeof i.skill&&0!=i.skill.length){var n=i.skill,o=n[0],r=o.marking;if(n){var c=e(r);s+='<div class="course-card-top cart-color '+c+'">';var d="";$.each(n,function(a){d+="<span>"+n[a].name+"</span>"}),s+=d+"</div>"}}var l='<div class="course-card-content">									<h3 class="course-card-name">'+i.name+'</h3>									<p title="'+i.short_description+'">'+i.short_description+'</p>									<div class="clearfix course-card-bottom">										<div class="course-card-info">											'+i.easy_name+"<span>·</span>"+i.numbers+"人在学										</div>									</div>								</div>							</a>";s+=l;var p="";-1!=i.learn_rate&&(p=100==i.learn_rate?'<div class="course-card-learning"><i class="sz-done2"></i></div>':'<div class="course-card-learning">'+i.learn_rate+"%</div>"),s+=p;var u="";u="undefined"!=typeof i.background_pic&&null!=i.background_pic?'<div class="course-card-bk">											<img src="http://www.imooc.com/courseimg/s/'+i.background_pic+'_s.jpg" />										</div>':'<div class="course-card-bk">											<img src="http://www.imooc.com/courseimg/s/cover015_s.jpg" />										</div>',s+=u+"</div>"}s+="</div>",$(".js-prelearn").html(s)},o=function(){$.ajax({url:"/class/ajaxprelearn",dataType:"json",data:{cid:$(".js-prelearn").data("id")}}).done(function(a){"0"==a.result&&a.data.length>0&&n(a.data)})};o();var r=function(a){for(var s='<h3 class="box-tit box-class-tit">实战推荐</h3>						<div class="shizhan-list-wrap">							<div class="shizhan-course-list clearfix">',t=0;t<a.length;t++){var i=a[t];s+='<div class="shizhan-course-wrap l">						<a href="/class/'+i.id+'.html" target="_blank">							<div class="shizhan-course-box">';var e="";"undefinded"!=typeof i.isapplied&&1==i.isapplied&&"undefinded"!=typeof i.learn_rate&&(e=100==i.learn_rate?'<div class="shizhan-course-rate sz-done2"></div>':'<div class="shizhan-course-rate">'+i.learn_rate+"%</div>"),s+=e+'<div class="box">								<div class="img-box">					            	<img class="shizhan-course-img" alt="'+i.name+'" src="'+i.pic_url+'">					            </div>				                <div class="shizhan-intro-box">				                    <p class="shizan-name" title="'+i.name+'">'+i.name+'</p>				                    <p class="shizan-desc" title="'+i.short_description+'">'+i.short_description+'</p>									<div class="shizhan-info-bottom">										<div class="bottom-box clearfix">											<div class="evaluation-box l">												<div class="shizhan-info">';var n="";"undefinded"!=typeof i.type&&(1==i.easy_type?n="<span>初级</span>":2==i.easy_type?n="<span>中级</span>":3==i.easy_type&&(n="<span>高级</span>")),s+=n+"<i>·</i>";var o="";o="undefinded"!=typeof i.numbers?"<span>"+i.numbers+"人学习</span>":"<span>0人学习</span>",s+=o+'</div>								<div class="stars">';var r="";if("undefinded"!=typeof i.comment_score){var c=Math.round(i.comment_score),d=!1;0==i.comment_score&&(c=Math.round(10)),c%2==1&&(c--,d=!0);for(var l=c/2,p=5-l;l--;)r+='<i class="sz-star on"></i>';for(d&&(r+='<span style="position: relative; display:inline-block; line-height:0"><i class="sz-star"></i><i class="sz-star-h on" style="position: absolute; left: 0px; top: 0px;"></i></span>',p--);p--;)r+='<i class="sz-star"></i>'}s+=r+'</div>								<div class="evaluation-desc-box clearfix">									<i class="trangle"></i>									<div class="left-box l">										<p>综合评分</p>';var u='<p class="big-text">10.00</p>';"undefinded"!=typeof i.comment_score&&0!=i.comment_score&&(u='<p class="big-text">'+i.comment_score+"</p>"),s+=u;var h="<p>0人评价</p>";"undefinded"!=typeof i.comment_num&&(h="<p>"+i.comment_num+"人评价</p>"),s+=h+'</div>								<div class="right-box l">',"undefinded"!=typeof i.evaluate&&$.each(i.evaluate,function(a){s+="<p>"+i.evaluate[a].title+"<span>"+i.evaluate[a].score+"</span></p>"}),s+="</div></div></div>",s+='<div class="r">',s+=1==i.show_price_info.is_show_discount_price?'<p class="shizhan-discount-price">￥'+i.show_price_info.price+'</p>				 		<p class="shizhan-course-price">￥'+i.show_price_info.discount_price+"</p>				 	</div>":"undefined"!=typeof i.show_price_info.discount_type&&2==i.show_price_info.discount_type?'<p class="student-price"><span>学生惠</span>￥'+i.show_price_info.price+'</p>							<p class="shizhan-course-price">￥'+i.show_price_info.discount_price+"</p></div>":'<p class="shizhan-price"></p>							<p class="shizhan-course-price">￥'+i.show_price_info.price+"</p></div>",s+="</div></div></div></div></div></a></div>"}s+="</div>",$(".js-recom-course").html(s)},c=function(){$.ajax({url:"/class/ajaxcourserecommend",dataType:"json",data:{cid:$(".js-recom-course").data("id")}}).done(function(a){"0"==a.result&&a.data.length>0&&r(a.data)})};c(),$(".js-video-btn").on("click",function(){$(this).hide(),a()}),$("#js-video-content").on("click",".js-close-video",function(){$("#js-video-content").hide().html('<div class="desc-short">			<a href="javascript:void(0);" class="js-close-video close-video sz-close-h"></a>			<div class="video-container" id="video-container"></div>		</div>'),$(".js-video-btn").fadeIn()}),$(".js-buy-trigger").on("click",function(){if(!OP_CONFIG.isLogin)return void $("#js-signin-btn").trigger("click");if(!$(this).hasClass("disabled")&&!$(this).is(".unopen")){var a=$(this).attr("data-cid"),s=$(this).attr("data-pay"),t="/learn/list/";window.location.href="3"==s?t+a+".html":"http://order.imooc.com/pay/buynow?type_id="+a+"&type=1"}});var d=$(".js-fixed");$(window).on("scroll",function(){var a=$(window).scrollTop(),s=Number($(".js-comp-tab").offset().top)+90;a>s&&!t?d.show():d.hide()});var l=function(a){var s=$(".js-endcart").offset(),t=$("<i class='parabola sz-add-shopping-cart' style='font-size: 40px; color: #b5b9bc;'></i>"),i=$(a).offset().left,e=$(a).offset().top-$(window).scrollTop();t.fly({start:{left:i,top:e},end:{left:s.left,top:s.top-$(window).scrollTop(),width:20,height:20,callback:function(){$(".parabola").remove();var a=parseInt($(".js-cart-num").attr("data-cartnum")),s=parseInt($(".js-cart-num").attr("data-ordernum"));$(".js-cart-num").html(parseInt(a+1+s)).attr("data-cartnum",parseInt(a+1)).show()}}});$(".js-cart-num").html()},p=!1;$("body").on("click",".js-addcart",function(a){var s=this;if(!p){p=!0;var t=$(this).attr("data-cid"),i=$(this).attr("data-type"),e={type_id:t,type:i};return $.ajax({url:"http://order.imooc.com/pay/addtocart",dataType:"jsonp",data:e,jsonp:"jsonpcallback",success:function(t){"0"==t.result?(_cartFlag=1,l(s,a)):$.alert(t.msg),p=!1}}),a.preventDefault(),!1}}),$("#before-buy-modal").on("click",".go-pay-btn",function(){if("正在创建订单..."!=$(this).html()){var a=$(this).attr("data-href");$(this).html("正在创建订单..."),window.location.href=a}}),isLogin&&$(".js-buy-trigger").length&&setTimeout(function(){$.get("/class/stay30s",{cid:$(".js-buy-trigger").data("cid")})},3e4);var u,h=function(a){var s=$.trim($(".js-inputcont").val()),t="";if(a.data_adv.length>0){for(var i=a.data_adv,e=$(".js-load-prelist").data("cid"),t='<ul class="prebox question-content">',n=0;n<i.length;n++){{i[n]}t+='<li><div class="left-hand fl">',t+="1"==i[n].mypraise?'<div class="hand-block js-praise current" data-advid="'+i[n].id+'">':'<div class="hand-block js-praise" data-advid="'+i[n].id+'">',t+='<i class="sz-thumb"></i><br><span class="hand-number">'+i[n].praise+"</span>",t+="</div></div>",t+='<div class="mid-detail fl">',t+='<h3 class="question-title">',t+='<a href="/class/consult/detail/'+i[n].id+'.html" title="'+i[n].content+'">'+i[n].content+"</a></h3>",t+='<div class="answer-content">',t+="<p>"+i[n].answer+"</p></div></div> ",t+='<div class="right-date fl">'+i[n].create_time+"</div>",t+="</li>"}t+="</ul>",a.total>6&&(t+='<div class="w more-question">',t+='<a href="/class/consult/'+e+'.html" target="_blank">',t+="查看全部<span> "+a.total+" </span>条已回复的咨询</a></div>")}else 0==a.data_adv.length&&(t+=""==s?'<div class="question-null">暂无任何课前咨询问题</div>':'<div class="question-null"> 抱歉，没有找到答案，您可以点击“提问”提交此条提问给官方客服，我们会及时回复。</div>');$(".js-load-prelist").html(t),$(document).find(".comp-loading").hide()},v=null,f=function(a){v&&clearTimeout(v),v=setTimeout(function(){a=$.trim($(".js-inputcont").val());var s=$(".js-load-prelist").data("cid");$.ajax({url:"/class/ajaxconsultsearch",dataType:"json",data:{cid:s,page:1,pagesize:6,words:a}}).done(function(a){"0"==a.result&&h(a.data)})},500)};f(),$(".js-inputcont").on("keyup",function(){v&&clearTimeout(v),f()}),$(document).on("click",".js-praise",function(){if(!OP_CONFIG.isLogin)return void $("#js-signin-btn").trigger("click");var a=$(this),s=a.data("advid"),t=$(this).find(".hand-number");a.hasClass("current")&&$.prompt("亲已经点过赞了，不能重复点哟！",{icon:"success"}),$.ajax({url:"/class/ajaxpraiseconsult",type:"post",dataType:"json",data:{advid:s}}).done(function(s){0==s.result&&(a.addClass("current"),t.html(parseInt(t.text())+1),$.prompt(s.msg,{icon:"success"}))})}),$(".js-question-btn").on("click",function(){if(!OP_CONFIG.isLogin)return void $("#js-signin-btn").trigger("click");var a=$(this).data("cid"),s=$.trim($(".js-inputcont").val());return s.length<5?void $.prompt("最少输入5个字符",{icon:"error",timeout:1e3}):s.length>50?void $.prompt("最多输入50个字符",{icon:"error",timeout:1e3}):void $.confirm("您确认提交此问题吗？",{callback:function(){$.ajax({url:"/class/ajaxdoconsult",type:"post",dataType:"json",data:{cid:a,content:s}}).done(function(a){0==a.result?$.prompt("问题提交成功，回答会以通知形式告知您",{icon:"success",callback:function(){u=$(".js-inputcont").val(""),f(u)}}):$.prompt(a.msg,{icon:"error",timeout:1e3})})}})});var m=function(a){var s=Math.floor(a/3600),t=Math.floor(a%3600/60),i=Math.floor(a%3600%60);return s=10>s?"0"+s:s,t=10>t?"0"+t:t,i=10>i?"0"+i:i,s+":"+t+":"+i},g=function(a,s){a--,$(s).html(m(a)),a>0&&setTimeout(function(){g(a,s)},1e3)};$(function(){var a=$(".js-sales-timer").data("timer");a&&g(a,$(".js-sales-timer"))})});